{"version":3,"sources":["../lib/docor.js"],"names":[],"mappings":"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","file":"lib/docor.js","sourcesContent":["import fs from 'fs'\nimport path from 'path'\nimport render from './render'\n\nconst sys = require(path.resolve(__dirname, '../package.json'));\nconst templates = path.resolve(__dirname, '../templates');\n\nexport function fetchLicenses(license) {\n  if (!license)\n    return null\n\n  license = license.toString().toLowerCase()\n\n  try {\n    return fs.readFileSync(\n      path.join(templates, 'licenses', license)\n    )\n  } catch (e) {\n    return null\n  }\n}\n\nexport function createFile(filename, callback) {\n  var cwd = process.cwd()\n  var pkg = require(path.join(cwd, 'package.json'))\n\n  var locals = {\n    pkg,\n    sys,\n    'year': new Date().getFullYear(),\n    'apis': null,\n  }\n\n  if (filename.indexOf('README') > -1 || filename.indexOf('LICENSE') > -1)\n    locals.license = fetchLicenses(pkg.license)\n\n  if (pkg.name)\n    pkg.parsedName = parseName(pkg.name)\n\n  if (locals.license)\n    locals.license = locals.license.toString()\n\n  if (pkg.main) {\n    try {\n      locals.apis = require(path.join(cwd, pkg.main))\n    } catch (err) {\n      // just ignore the error\n    }\n  }\n\n  return fs.writeFile(\n    path.join(cwd, filename),\n    render(filename.indexOf('.') === 0 ? filename.substr(1) : filename)(locals),\n    callback\n  )\n}\n\nfunction parseName(str) {\n  if (str.indexOf('-') === 0)\n    return str\n\n  var token = str.split('-')\n\n  if (!token.length)\n    return str\n\n  for (var i = token.length - 1; i >= 0; i--) {\n    ((index) => {\n      if (index === 0)\n        return\n\n      token[index] = token[index].charAt(0).toUpperCase() + token[index].substr(1)\n    })(i);\n  }\n\n  return token.join('')\n}\n"]}